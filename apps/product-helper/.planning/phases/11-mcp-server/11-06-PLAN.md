---
plan: 11-06
name: Connections UI & Export Generators
wave: 3
autonomous: true
subsystem: frontend
agent: ui-ux-engineer
---

# Plan 11-06: Connections UI & Export Generators

## Objective

Create the one-click setup UI for MCP integrations and export generators for SKILL.md and CLAUDE.md files.

## Features

1. Connections page showing available integrations
2. One-click copy commands for Claude Code/Cursor/VS Code
3. API key management UI
4. SKILL.md and CLAUDE.md download

## Tasks

### Task 1: Create Connections Page

**File:** `app/(dashboard)/projects/[id]/connections/page.tsx`

```tsx
// Connections page layout
// - Integration cards (Claude Code, Cursor, VS Code, Windsurf)
// - Setup instructions for each
// - Copy-to-clipboard commands
// - API key management section
// - Download buttons for SKILL.md / CLAUDE.md

export default function ConnectionsPage({ params }: Props) {
  return (
    <div className="space-y-8">
      <ConnectionsHeader />
      <IntegrationCards projectId={params.id} />
      <ApiKeyManagement projectId={params.id} />
      <ExportSection projectId={params.id} />
    </div>
  );
}
```

### Task 2: Create Integration Cards Component

**File:** `components/connections/integration-cards.tsx`

```tsx
// Cards for each supported integration
// - Claude Code: `claude mcp add product-helper-[name] https://...`
// - Cursor: MCP config JSON
// - VS Code: Extension link + config
// - Windsurf: Similar to Cursor

interface IntegrationCard {
  name: string;
  icon: ReactNode;
  description: string;
  setupCommand: string;
  docsUrl: string;
}
```

### Task 3: Create API Key Management UI

**File:** `components/connections/api-key-management.tsx`

```tsx
// List existing keys (prefix + name + created + lastUsed)
// Create new key button (shows full key ONCE in modal)
// Revoke key button with confirmation
// Connection status indicator (shows if any key used recently)
```

### Task 4: Create SKILL.md Generator

**File:** `lib/mcp/skill-generator.ts`

```typescript
export async function generateSkillMd(projectId: string): Promise<string> {
  // Generate SKILL.md content for the project
  // Includes:
  // - Project overview
  // - Available MCP tools
  // - Usage examples
  // - Project-specific guidelines
}
```

**Output format:**
```markdown
# [Project Name] - Development Skills

## Project Context
{problem statement, key requirements}

## Available Tools
- `get_prd` - Get product requirements
- `get_database_schema` - Get entity definitions
...

## Development Guidelines
{from coding guidelines}

## Quick Reference
{key entities, tech stack, architecture decisions}
```

### Task 5: Create CLAUDE.md Generator

**File:** `lib/mcp/claude-md-generator.ts`

```typescript
export async function generateClaudeMd(projectId: string): Promise<string> {
  // Generate CLAUDE.md for quick reference
  // Shorter than SKILL.md, focused on essentials
}
```

### Task 6: Create Config Generator Route

**File:** `app/api/mcp/config/route.ts`

```typescript
// GET: Generate MCP config JSON for various clients
// Query params: ?client=claude|cursor|vscode

export async function GET(request: Request) {
  // Return config JSON based on client type
}
```

### Task 7: Create Export Download Routes

**File:** `app/api/projects/[id]/exports/skill/route.ts`

```typescript
// GET: Download SKILL.md
export async function GET(request: Request, { params }) {
  const content = await generateSkillMd(params.id);
  return new Response(content, {
    headers: {
      'Content-Type': 'text/markdown',
      'Content-Disposition': `attachment; filename="SKILL.md"`
    }
  });
}
```

**File:** `app/api/projects/[id]/exports/claude-md/route.ts`

### Task 8: Add Copy-to-Clipboard Commands

**File:** `components/connections/copy-command.tsx`

```tsx
// Reusable copy button component
// Shows command with copy icon
// Toast on successful copy
// Tracks which integration is most used (analytics)
```

### Task 9: Add Connection Status Indicator

**File:** `components/connections/connection-status.tsx`

```tsx
// Shows if MCP is actively connected
// Based on lastUsedAt of any API key
// Green: Used in last hour
// Yellow: Used in last 24h
// Gray: Not used recently
```

### Task 10: Add Tests

**Files:**
- `components/connections/__tests__/`
- `lib/mcp/__tests__/skill-generator.test.ts`
- `lib/mcp/__tests__/claude-md-generator.test.ts`

## Dependencies

- 11-01, 11-02 (MCP framework + API keys)

## Deliverables

- [ ] `/projects/[id]/connections` page working
- [ ] Integration cards with copy commands
- [ ] API key CRUD in UI
- [ ] SKILL.md download working
- [ ] CLAUDE.md download working
- [ ] Connection status shows correctly
- [ ] Tests pass
