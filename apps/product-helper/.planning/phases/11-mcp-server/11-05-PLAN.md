---
plan: 11-05
name: Unique MCP Tools (Our Advantage)
wave: 2
autonomous: true
subsystem: api
agent: langchain-engineer
---

# Plan 11-05: Unique MCP Tools (5 tools)

## Objective

Implement our unique MCP tools that differentiate us from Epic.dev - SR-CORNELL validation, GSD workflow, CLEO tasks, agent invocation, and semantic search.

## Tools to Implement

| Tool | Description | Advantage |
|------|-------------|-----------|
| `get_validation_status` | SR-CORNELL score + checks | Quality gate |
| `get_gsd_phases` | GSD workflow phases | Structured dev |
| `get_cleo_tasks` | CLEO task list | Stable IDs |
| `invoke_agent` | Trigger domain agent | 17 specialists |
| `ask_project_question` | AI Q&A about project | Context-aware |
| `search_project_context` | Semantic search | Fast lookup |

## Tasks

### Task 1: Implement get_validation_status Tool

**File:** `app/api/mcp/tools/unique/get-validation-status.ts`

```typescript
export const getValidationStatusTool: ToolHandler = {
  definition: {
    name: 'get_validation_status',
    description: 'Get SR-CORNELL validation score and individual check results. Shows PRD completeness and quality.',
    inputSchema: {
      type: 'object',
      properties: {
        verbose: {
          type: 'boolean',
          description: 'Include detailed check results (default: false)'
        }
      }
    }
  },
  execute: async (args, projectId) => {
    // Call SR-CORNELL validator
    // Return: { score: 85, passing: 8, failing: 2, checks: [...] }
  }
};
```

### Task 2: Implement get_gsd_phases Tool

**File:** `app/api/mcp/tools/unique/get-gsd-phases.ts`

```typescript
// Returns GSD workflow phases for the project
// Reads from .planning/ROADMAP.md or project config

interface GSDPhase {
  id: string;
  name: string;
  status: 'pending' | 'in-progress' | 'complete';
  tasks: GSDTask[];
}
```

### Task 3: Implement get_cleo_tasks Tool

**File:** `app/api/mcp/tools/unique/get-cleo-tasks.ts`

```typescript
// Returns CLEO-tracked tasks with stable IDs
// Useful for referencing tasks in commits/PRs

inputSchema: {
  properties: {
    status: { enum: ['all', 'pending', 'in-progress', 'completed'] },
    phase: { type: 'string', description: 'Filter by GSD phase' }
  }
}
```

### Task 4: Implement invoke_agent Tool

**File:** `app/api/mcp/tools/unique/invoke-agent.ts`

```typescript
export const invokeAgentTool: ToolHandler = {
  definition: {
    name: 'invoke_agent',
    description: 'Invoke a specialized domain agent (17 available). Returns agent output.',
    inputSchema: {
      type: 'object',
      properties: {
        agent: {
          type: 'string',
          enum: [
            'backend-architect', 'database-engineer', 'devops-engineer',
            'ui-ux-engineer', 'chat-engineer', 'data-viz-engineer',
            'langchain-engineer', 'llm-workflow-engineer', 'sr-cornell-validator',
            'vector-store-engineer', 'cache-engineer', 'observability-engineer',
            'product-manager', 'product-strategy', 'technical-program-manager',
            'qa-engineer', 'documentation-engineer'
          ],
          description: 'Agent to invoke'
        },
        task: {
          type: 'string',
          description: 'Task description for the agent'
        },
        context: {
          type: 'object',
          description: 'Additional context to pass to agent'
        }
      },
      required: ['agent', 'task']
    }
  },
  execute: async (args, projectId) => {
    // Load agent prompt/config
    // Execute with project context
    // Return agent response
  }
};
```

### Task 5: Implement ask_project_question Tool

**File:** `app/api/mcp/tools/unique/ask-question.ts`

```typescript
// RAG-powered Q&A about the project
// Uses project data as context for LLM

inputSchema: {
  properties: {
    question: { type: 'string', description: 'Question about the project' },
    scope: {
      enum: ['all', 'requirements', 'technical', 'architecture'],
      description: 'Scope to search (default: all)'
    }
  },
  required: ['question']
}
```

### Task 6: Implement search_project_context Tool

**File:** `app/api/mcp/tools/unique/search-context.ts`

```typescript
// Keyword/semantic search across project data
// Fast lookup without needing full document retrieval

inputSchema: {
  properties: {
    query: { type: 'string', description: 'Search query' },
    type: {
      enum: ['all', 'use_cases', 'entities', 'stories', 'endpoints'],
      description: 'Content type to search'
    },
    limit: { type: 'number', description: 'Max results (default: 10)' }
  },
  required: ['query']
}
```

### Task 7: Register Tools

**File:** `lib/mcp/register-tools.ts` (modify)

Add unique tools to registration.

### Task 8: Add Tests

**File:** `app/api/mcp/tools/unique/__tests__/`

## Dependencies

- 11-01 (MCP Framework)
- SR-CORNELL validator (existing)
- Domain agents (existing)

## Deliverables

- [ ] 6 unique tools implemented
- [ ] invoke_agent working with all 17 agents
- [ ] Validation status includes SR-CORNELL scores
- [ ] Tests pass
