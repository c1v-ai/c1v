---
plan: 10-03
name: Coding Guidelines Agent
wave: 1
autonomous: true
subsystem: langchain
---

# Plan 10-03: Coding Guidelines Agent

## Objective

Create an AI agent that generates coding guidelines based on tech stack and team preferences. Output includes naming conventions, design patterns, forbidden patterns, linting config, testing strategy, and documentation requirements.

## Context

- Types defined in `lib/db/schema/v2-types.ts` (CodingGuidelines interface)
- Database column exists: `project_data.coding_guidelines` (added in Phase 9)
- Pattern to follow: `lib/langchain/agents/tech-stack-agent.ts`

## Tasks

### Task 1: Create Guidelines Agent

**File:** `lib/langchain/agents/guidelines-agent.ts`

**Inputs:**
- Tech stack (languages, frameworks)
- Team size and experience level
- Project type (startup, enterprise, open-source)
- Specific preferences (functional vs OOP, etc.)

**Outputs (CodingGuidelines):**
```typescript
{
  naming: {
    variables: string;       // "camelCase"
    functions: string;       // "camelCase"
    classes: string;         // "PascalCase"
    constants: string;       // "SCREAMING_SNAKE_CASE"
    files: string;           // "kebab-case"
    components: string;      // "PascalCase"
  },
  patterns: [
    {
      name: string;          // "Repository Pattern"
      description: string;
      when: string;
      example: string;
    }
  ],
  forbidden: [
    {
      pattern: string;       // "any type"
      reason: string;
      alternative: string;
    }
  ],
  linting: {
    eslint: object;          // ESLint config
    prettier: object;        // Prettier config
    typescript: object;      // TSConfig strict settings
  },
  testing: {
    framework: string;       // "vitest" | "jest"
    coverage: number;        // 80
    strategy: string;        // "unit + integration + e2e"
    patterns: string[];
  },
  documentation: {
    style: string;           // "JSDoc" | "TSDoc"
    required: string[];      // ["public functions", "complex logic"]
    readme: string[];        // Required README sections
  }
}
```

**Implementation:**
1. Create Zod schema for structured output
2. Build prompt with tech stack context
3. Generate stack-appropriate guidelines (React patterns for React, etc.)
4. Include real-world examples

### Task 2: Create API Route

**File:** `app/api/projects/[id]/guidelines/route.ts`

- GET: Return existing coding guidelines
- POST: Generate new guidelines from tech stack + preferences

### Task 3: Add Zod Validators

**File:** `lib/db/schema/v2-validators.ts` (append)

Add Zod schemas for CodingGuidelines and nested types.

## Dependencies

None - can run in parallel with other Wave 1 plans.

## Deliverables

- [ ] `lib/langchain/agents/guidelines-agent.ts` created
- [ ] `app/api/projects/[id]/guidelines/route.ts` created
- [ ] Zod validators added to v2-validators.ts
- [ ] Agent generates tech-stack-appropriate guidelines
